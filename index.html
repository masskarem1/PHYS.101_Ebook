<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interactive Physics eBook</title>
  
  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js" defer></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <!-- Config -->
  <script src="config.js"></script>
</head>
<body>

  <!-- ğŸ” Lock Screen (optional) -->
  <div id="lockScreen" class="hidden">
    <div class="lock-box">
      <h2>Enter Student ID</h2>
      <input type="text" id="studentID" placeholder="Student ID" />
      <button id="loginBtn">Login</button>
      <p id="loginError"></p>
    </div>
  </div>

  <!-- ğŸ§­ Toolbar -->
  <header class="toolbar-container">
    <button id="firstBtn">â®</button>
    <button id="prevBtn">â—€</button>
    <input id="pageInput" type="number" min="1" />
    <span id="pageCount">/ 0</span>
    <button id="nextBtn">â–¶</button>
    <button id="lastBtn">â­</button>

    <button id="drawToggle">âœï¸ Draw</button>
    <button id="highlightToggle">ğŸ–ï¸ Highlight</button>
    <button id="searchBtn">ğŸ”</button>
    <button id="aiBtn">ğŸ§ </button>
    <button id="phetBtn" class="hidden">âš™ï¸ Sim</button>
    <button id="videoBtn" class="hidden">ğŸ¬ Video</button>
  </header>

  <!-- ğŸ” Search -->
  <div id="searchContainer" class="popup hidden">
    <input type="text" id="searchInput" placeholder="Search..." />
    <button id="closeSearch">Ã—</button>
    <ul id="searchResults"></ul>
  </div>

  <!-- ğŸ“– Main Flipbook -->
  <main id="flipbook">
    <div class="page-wrap">
      <img id="pageImage" class="page-image" src="" alt="Book Page" />
      <canvas id="highlightCanvas"></canvas>
    </div>
  </main>

  <!-- ğŸ§© Thumbnails -->
  <div id="thumbbar"></div>

  <!-- ğŸ§  AI Helper Modal -->
  <div id="aiHelperModal" class="modal hidden">
    <div class="modal-content">
      <h2>AI Assistant</h2>
      <div class="btn-group">
        <button class="ai-action" data-action="explain">Explain</button>
        <button class="ai-action" data-action="quiz">Quiz</button>
        <button class="ai-action" data-action="relate">Relate</button>
        <button class="ai-action" data-action="analyze">Analyze Page</button>
        <button class="ai-action" data-action="translate">Translate Page</button>
      </div>
      <div id="aiResponse"></div>
      <button id="translateResponseBtn" class="hidden">Translate Analysis</button>
      <div id="aiLoading" class="hidden">Loading...</div>
      <button id="closeAI">Ã—</button>
    </div>
  </div>

  <!-- ğŸŒ Overlay Translation -->
  <div id="overlay-translation" class="hidden">
    <button id="closeTranslation">Ã—</button>
    <div id="translationContent"></div>
  </div>

  <!-- ğŸ¥ Video Modal -->
  <div id="videoModal" class="modal hidden">
    <div class="modal-content">
      <button class="closeModal">Ã—</button>
      <iframe id="videoFrame" allowfullscreen></iframe>
    </div>
  </div>

  <!-- âš™ï¸ PhET Simulation Modal -->
  <div id="phetModal" class="modal hidden">
    <div class="modal-content">
      <button class="closeModal">Ã—</button>
      <iframe id="phetFrame"></iframe>
    </div>
  </div>

  <!-- ğŸ“– Index Menu -->
  <footer>
    <button id="indexToggle">â˜° Index</button>
    <ul id="indexMenu" class="hidden"></ul>
  </footer>

  <!-- App Script -->
  <script src="app.js" defer></script>
</body>
</html>
